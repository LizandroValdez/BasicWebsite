"use strict";!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window[n]=t()}("basicContext",function(){var n=null,t=function(){var n=void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+n)},e=function(){var n=void 0===arguments[0]?{}:arguments[0];return null==n["class"]&&(n["class"]=""),null==n.type&&(n.type="item"),null==n.icon&&(n.icon=null),null==n.title&&(n.title="Undefined"),null==n.fn&&"separator"!==n.type?(console.warn("Missing fn for item '"+n.title+"'"),!1):!0},l=function(n){var t,l=0,o="";t=function(n){var t="",o="";return e(n)===!1?"":(n.num=l++,null!==n.icon&&(o="<span class='"+n.icon+"'></span>"),"item"===n.type?t="\n			       <tr class='"+n["class"]+"'>\n			           <td data-num='"+n.num+"'>"+o+n.title+"</td>\n			       </tr>\n			       ":"separator"===n.type&&(t="\n			       <tr class='separator'></tr>\n			       "),t)},o+="\n	           <div class='basicContextContainer'>\n	               <div class='basicContext'>\n	                   <table>\n	                       <tbody>\n	           ";for(var i=0;i<n.length;++i)o+=t(n[i]);return o+="\n	                       </tbody>\n	                   </table>\n	               </div>\n	           </div>\n	           "},o=function(n){if(null!=n&&"touchend"===n.type&&(null==n.pageX||null==n.pageY)){var t=n.changedTouches;t.length>0&&(n.pageX=t[0].pageX,n.pageY=t[0].pageY)}return n},i=function(n){n=o(n);var e={scrollTop:document.body.scrollTop,width:window.innerWidth,height:window.innerHeight},l=n.pageX,i=n.pageY-e.scrollTop;(null==l||0>l)&&(l=0),(null==i||0>i)&&(i=0);var r={width:t().offsetWidth,height:t().offsetHeight};return l>e.width&&(l=e.width),i>e.height&&(i=e.height),l+r.width>e.width&&(l-=l+r.width-e.width),i+r.height>e.height&&(i-=i+r.height-e.height),r.height>e.height&&(i=0,t().classList.add("basicContext--scrollable")),{x:l,y:i}},r=function(n){null!=n.fn&&(t("td[data-num='"+n.num+"']").onclick=n.fn)},u=function(e,o,u,a){var d=l(e);document.body.insertAdjacentHTML("beforeend",d),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var c=i(o);t().style.left=""+c.x+"px",t().style.top=""+c.y+"px",t().style.opacity=1,null==u&&(u=s),t().parentElement.onclick=u;for(var f=0;f<e.length;++f)r(e[f]);return null!=a&&a(),"function"==typeof o.preventDefault&&o.preventDefault(),!0},a=function(){var n=t();return null==n||0===n.length?!1:!0},s=function(){return t().parentElement.remove(),null!=n&&(document.body.style.overflow=n,n=null),!0};return{show:u,visible:a,close:s}});