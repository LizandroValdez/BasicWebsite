this.context={_valid:function(t){return null!=t?(null==t["class"]&&(t["class"]=""),null==t.type&&(t.type="item"),null==t.icon&&(t.icon=""),null==t.title&&(t.title="Undefined"),null==t.fn&&"separator"!==t.type?(console.warn("Missing fn for item '"+t.title+"'"),!1):!0):!1},_build:function(t){var n,e;return n=function(t){var n;if(!context._valid(t))return"";switch(n="<span class='"+t.icon+"'></span>",""===t.icon&&(n=""),t.type){case"item":return"<tr><td data-name='"+t.title+"'>"+n+t.title+"</td></tr>";case"separator":return"<tr class='separator'></tr>"}},"<div class='contextContainer'>\n	<div class='context "+t["class"]+"'>\n		<table>\n			<tbody>\n				"+function(){var i,o,l;for(l=[],i=0,o=t.length;o>i;i++)e=t[i],l.push(n(e));return l}().join("")+"\n			</tbody>\n		</table>\n	</div>\n</div>"},_normalizeEvent:function(t){var n;return null!=t&&"touchend"===t.type&&null==t.pageX&&null==t.pageY&&(n=t.originalEvent.changedTouches,n.length>0&&(t.pageX=n[0].pageX,t.pageY=n[0].pageY)),t},_getPosition:function(t){var n,e,i;return t=context._normalizeEvent(t),e=t.pageX,i=t.pageY-$(document).scrollTop(),n={width:$("html").width(),height:$("html").height()},(null==e||0>e)&&(e=0),(null==i||0>i)&&(i=0),e>n.width&&(e=n.width),i>n.height&&(i=n.height),{x:e,y:i}},_bind:function(t){return $(".contextContainer td[data-name='"+t.title+"']").click(t.fn)},show:function(t,n,e){var i,o,l,c,a,r;for($("body").append(context._build(t)),$("body").css("overflow","hidden"),l=context._getPosition(n),o={width:$(".contextContainer .context").outerWidth(!0),height:$(".contextContainer .context").outerHeight(!0)},i={width:$("html").width(),height:$("html").height()},l.x+o.width>i.width&&(l.x-=o.width),l.y+o.height>i.height&&(l.y-=l.y+o.height-i.height),$(".contextContainer .context").css({top:""+l.y+"px",left:""+l.x+"px",opacity:1}),null==e&&(e=context.close),null!=e&&$(".contextContainer").click(e),null==e&&$(".contextContainer").click(context.close),a=0,r=t.length;r>a;a++)c=t[a],context._bind(c);return null!=t.callback&&callback(),!0},close:function(){return $(".contextContainer").remove(),$("body").css("overflow","scroll"),!0}};