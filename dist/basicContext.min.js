this.context={_valid:function(t){return null!=(null!=t?t.type:void 0)&&"separator"===t.type?!0:null!=(null!=t?t.type:void 0)&&null!=t.title&&null!=t.icon&&null!=t.fn?!0:!1},_build:function(t){var n,e;return n=function(t){if(!context._valid(t))return"";switch(t.type){case"item":return"<tr><td data-name='"+t.title+"'><span class='"+t.icon+"'></span>"+t.title+"</td></tr>";case"separator":return"<tr class='separator'></tr>"}},"<div class='contextContainer'>\n	<div class='context'>\n		<table>\n			<tbody>\n				"+function(){var o,i,l;for(l=[],o=0,i=t.length;i>o;o++)e=t[o],l.push(n(e));return l}().join("")+"\n			</tbody>\n		</table>\n	</div>\n</div>"},_normalizeEvent:function(t){var n;return null!=t&&"touchend"===t.type&&null==t.pageX&&null==t.pageY&&(n=t.originalEvent.changedTouches,n.length>0&&(t.pageX=n[0].pageX,t.pageY=n[0].pageY)),t},_getPosition:function(t){var n,e,o;return t=context._normalizeEvent(t),e=t.pageX,o=t.pageY-$(document).scrollTop(),n={width:$("html").width(),height:$("html").height()},(null==e||0>e)&&(e=0),(null==o||0>o)&&(o=0),e>n.width&&(e=n.width),o>n.height&&(o=n.height),{x:e,y:o}},_bind:function(t){return $(".contextContainer td[data-name='"+t.title+"']").click(t.fn)},show:function(t,n,e){var o,i,l,c,r,a;for($("body").append(context._build(t)),$("body").css("overflow","hidden"),l=context._getPosition(n),i={width:$(".contextContainer .context").outerWidth(!0),height:$(".contextContainer .context").outerHeight(!0)},o={width:$("html").width(),height:$("html").height()},l.x+i.width>o.width&&(l.x-=i.width),l.y+i.height>o.height&&(l.y-=l.y+i.height-o.height),$(".contextContainer .context").css({top:""+l.y+"px",left:""+l.x+"px",opacity:1}),null==e&&(e=context.close),null!=e&&$(".contextContainer").click(e),null==e&&$(".contextContainer").click(context.close),r=0,a=t.length;a>r;r++)c=t[r],context._bind(c);return!0},close:function(){return $(".contextContainer").remove(),$("body").css("overflow","scroll"),!0}};