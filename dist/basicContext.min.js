"use strict";!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window[n]=t()}("basicContext",function(){var n=null,t=function(){var n=void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+n)},e=function(){var n=void 0===arguments[0]?{}:arguments[0];return null==n["class"]&&(n["class"]=""),null==n.type&&(n.type="item"),n.visible!==!1&&(n.visible=!0),null==n.icon&&(n.icon=null),null==n.title&&(n.title="Undefined"),n.disabled!==!0&&(n.disabled=!1),n.disabled===!0&&(n["class"]+=" basicContext__item--disabled"),null==n.fn&&"separator"!==n.type&&n.disabled===!1?(console.warn("Missing fn for item '"+n.title+"'"),!1):!0},i=function(n){var t=0,i="",l=void 0;l=function(n){var i="",l="";return e(n)===!1?"":n.visible===!1?"":(n.num=t++,null!==n.icon&&(l="<span class='basicContext__icon "+n.icon+"'></span>"),"item"===n.type?i="\n			       <tr class='basicContext__item "+n["class"]+"'>\n			           <td class='basicContext__data' data-num='"+n.num+"'>"+l+n.title+"</td>\n			       </tr>\n			       ":"separator"===n.type&&(i="\n			       <tr class='basicContext__item basicContext__item--separator'></tr>\n			       "),i)},i+="\n	           <div class='basicContextContainer'>\n	               <div class='basicContext'>\n	                   <table>\n	                       <tbody>\n	           ";for(var o=0;o<n.length;++o)i+=l(n[o]);return i+="\n	                       </tbody>\n	                   </table>\n	               </div>\n	           </div>\n	           "},l=function(){var n=void 0===arguments[0]?{}:arguments[0],t={x:n.clientX,y:n.clientY};if("touchend"===n.type&&(null==t.x||null==t.y)){var e=n.changedTouches;null!=e&&e.length>0&&(t.x=e[0].clientX,t.y=e[0].clientY)}return(null==t.x||t.x<0)&&(t.x=0),(null==t.y||t.y<0)&&(t.y=0),t},o=function(n){var e=l(n),i=e.x,o=e.y,a={width:window.innerWidth,height:window.innerHeight},r={width:t().offsetWidth,height:t().offsetHeight};return i>a.width&&(i=a.width),o>a.height&&(o=a.height),i+r.width>a.width&&(i-=i+r.width-a.width),o+r.height>a.height&&(o-=o+r.height-a.height),r.height>a.height&&(o=0,t().classList.add("basicContext--scrollable")),{x:i,y:o}},a=function(n){return null==n.fn?!1:n.visible===!1?!1:n.disabled===!0?!1:(t("td[data-num='"+n.num+"']").onclick=n.fn,t("td[data-num='"+n.num+"']").oncontextmenu=n.fn,!0)},r=function(e,l,r,u){var d=i(e);document.body.insertAdjacentHTML("beforeend",d),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var c=o(l),f=t();f.style.left=""+c.x+"px",f.style.top=""+c.y+"px",f.style.opacity=1,null==r&&(r=function(){return s(),!1}),f.parentElement.onclick=r,f.parentElement.oncontextmenu=r;for(var h=0;h<e.length;++h)a(e[h]);return null!=u&&u(),"function"==typeof l.preventDefault&&l.preventDefault(),!0},u=function(){var n=t();return null==n||0===n.length?!1:!0},s=function(){return u()===!1?!1:(t().parentElement.remove(),null!=n&&(document.body.style.overflow=n,n=null),!0)};return{show:r,visible:u,close:s}});