"use strict";!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window[n]=t()}("basicContext",function(){var n=null,t=function(){var n=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+n)},e=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return null==n["class"]&&(n["class"]=""),null==n.type&&(n.type="item"),n.visible!==!1&&(n.visible=!0),null==n.icon&&(n.icon=null),null==n.title&&(n.title="Undefined"),n.disabled!==!0&&(n.disabled=!1),n.disabled===!0&&(n["class"]+=" basicContext__item--disabled"),null==n.fn&&"separator"!==n.type&&n.disabled===!1?(console.warn("Missing fn for item '"+n.title+"'"),!1):!0},i=function(n){var t=0,i="",l=void 0;l=function(n){var i="",l="";return e(n)===!1?"":n.visible===!1?"":(n.num=t++,null!==n.icon&&(l="<span class='basicContext__icon "+n.icon+"'></span>"),"item"===n.type?i="\n			       <tr class='basicContext__item "+n["class"]+"'>\n			           <td class='basicContext__data' data-num='"+n.num+"'>"+l+n.title+"</td>\n			       </tr>\n			       ":"separator"===n.type&&(i="\n			       <tr class='basicContext__item basicContext__item--separator'></tr>\n			       "),i)},i+="\n	           <div class='basicContextContainer'>\n	               <div class='basicContext'>\n	                   <table>\n	                       <tbody>\n	           ";for(var o=0;o<n.length;++o)i+=l(n[o]);return i+="\n	                       </tbody>\n	                   </table>\n	               </div>\n	           </div>\n	           "},l=function(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={x:n.clientX,y:n.clientY};if("touchend"===n.type&&(null==t.x||null==t.y)){var e=n.changedTouches;null!=e&&e.length>0&&(t.x=e[0].clientX,t.y=e[0].clientY)}return(null==t.x||t.x<0)&&(t.x=0),(null==t.y||t.y<0)&&(t.y=0),t},o=function(n,t){var e=l(n),i=e.x,o=e.y,r={width:window.innerWidth,height:window.innerHeight},a={width:t.offsetWidth,height:t.offsetHeight};i+a.width>r.width&&(i-=i+a.width-r.width),o+a.height>r.height&&(o-=o+a.height-r.height),a.height>r.height&&(o=0,t.classList.add("basicContext--scrollable"));var s=e.x-i,u=e.y-o;return{x:i,y:o,rx:s,ry:u}},r=function(n){return null==n.fn?!1:n.visible===!1?!1:n.disabled===!0?!1:(t("td[data-num='"+n.num+"']").onclick=n.fn,t("td[data-num='"+n.num+"']").oncontextmenu=n.fn,!0)},a=function(e,l,a,s){var c=i(e);document.body.insertAdjacentHTML("beforeend",c),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var d=t(),f=o(l,d);d.style.left=f.x+"px",d.style.top=f.y+"px",d.style.transformOrigin=f.rx+"px "+f.ry+"px",d.style.opacity=1,null==a&&(a=function(){return u(),!1}),d.parentElement.onclick=a,d.parentElement.oncontextmenu=a;for(var m=0;m<e.length;++m)r(e[m]);return"function"==typeof l.preventDefault&&l.preventDefault(),"function"==typeof l.stopPropagation&&l.stopPropagation(),null!=s&&s(),!0},s=function(){var n=t();return null==n||0===n.length?!1:!0},u=function(){if(s()===!1)return!1;var t=document.querySelector(".basicContextContainer");return t.parentElement.removeChild(t),null!=n&&(document.body.style.overflow=n,n=null),!0};return{show:a,visible:s,close:u}});