this.basicContext={_overflow:null,_dom:function(t){return null==t?$(".basicContext"):$(".basicContext").find(""+t)},_valid:function(t){return null!=t?(null==t["class"]&&(t["class"]=""),null==t.type&&(t.type="item"),null==t.icon&&(t.icon=""),null==t.title&&(t.title="Undefined"),null==t.fn&&"separator"!==t.type?(console.warn("Missing fn for item '"+t.title+"'"),!1):!0):!1},_build:function(t){var n,e;return n=function(t){var n;if(!basicContext._valid(t))return"";switch(n="<span class='"+t.icon+"'></span>",""===t.icon&&(n=""),t.type){case"item":return"<tr class='"+t["class"]+"'><td data-name='"+encodeURI(t.title)+"'>"+n+t.title+"</td></tr>";case"separator":return"<tr class='separator'></tr>"}},"<div class='basicContextContainer'>\n	<div class='basicContext'>\n		<table>\n			<tbody>\n				"+function(){var o,i,l;for(l=[],o=0,i=t.length;i>o;o++)e=t[o],l.push(n(e));return l}().join("")+"\n			</tbody>\n		</table>\n	</div>\n</div>"},_normalizeEvent:function(t){var n;return null!=t&&"touchend"===t.type&&null==t.pageX&&null==t.pageY&&(n=t.originalEvent.changedTouches,n.length>0&&(t.pageX=n[0].pageX,t.pageY=n[0].pageY)),t},_getPosition:function(t){var n,e,o,i;return t=basicContext._normalizeEvent(t),o=t.pageX,i=t.pageY-$(document).scrollTop(),n={width:$("html").width(),height:$("html").height()},(null==o||0>o)&&(o=0),(null==i||0>i)&&(i=0),o>n.width&&(o=n.width),i>n.height&&(i=n.height),e={width:basicContext._dom().outerWidth(!0),height:basicContext._dom().outerHeight(!0)},o+e.width>n.width&&(o-=e.width),i+e.height>n.height&&(i-=i+e.height-n.height),e.height>n.height&&(i=0,basicContext._dom().addClass("basicContext--scrollable")),{x:o,y:i}},_bind:function(t){return basicContext._dom("td[data-name='"+encodeURI(t.title)+"']").click(t.fn)},show:function(t,n,e,o){var i,l,a,s;for($("body").append(basicContext._build(t)),null==basicContext._overflow&&(basicContext._overflow=$("body").css("overflow"),$("body").css("overflow","hidden")),i=basicContext._getPosition(n),basicContext._dom().css({top:""+i.y+"px",left:""+i.x+"px",opacity:1}),null==e&&(e=basicContext.close),basicContext._dom().parent().click(e),a=0,s=t.length;s>a;a++)l=t[a],basicContext._bind(l);return n.preventDefault(),null!=o&&o(),!0},visible:function(){return 0===basicContext._dom().length?!1:!0},close:function(){return basicContext._dom().parent().remove(),null!=basicContext._overflow&&($("body").css("overflow",basicContext._overflow),basicContext._overflow=null),!0}};