"use strict";!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window[n]=t()}("basicContext",function(){var n=null,t=function(){var n=void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+n)},e=function(){var n=void 0===arguments[0]?{}:arguments[0];return null==n["class"]&&(n["class"]=""),null==n.type&&(n.type="item"),n.visible!==!1&&(n.visible=!0),null==n.icon&&(n.icon=null),null==n.title&&(n.title="Undefined"),n.disabled!==!0&&(n.disabled=!1),n.disabled===!0&&(n["class"]+=" basicContext__disabled"),null==n.fn&&"separator"!==n.type&&n.disabled===!1?(console.warn("Missing fn for item '"+n.title+"'"),!1):!0},i=function(n){var t=0,i="",l=void 0;l=function(n){var i="",l="";return e(n)===!1?"":n.visible===!1?"":(n.num=t++,null!==n.icon&&(l="<span class='"+n.icon+"'></span>"),"item"===n.type?i="\n			       <tr class='"+n["class"]+"'>\n			           <td data-num='"+n.num+"'>"+l+n.title+"</td>\n			       </tr>\n			       ":"separator"===n.type&&(i="\n			       <tr class='basicContext__separator'></tr>\n			       "),i)},i+="\n	           <div class='basicContextContainer'>\n	               <div class='basicContext'>\n	                   <table>\n	                       <tbody>\n	           ";for(var o=0;o<n.length;++o)i+=l(n[o]);return i+="\n	                       </tbody>\n	                   </table>\n	               </div>\n	           </div>\n	           "},l=function(){var n=void 0===arguments[0]?{}:arguments[0],t={x:n.clientX,y:n.clientY};if("touchend"===n.type&&(null==t.x||null==t.y)){var e=n.changedTouches;null!=e&&e.length>0&&(t.x=e[0].clientX,t.y=e[0].clientY)}return(null==t.x||t.x<0)&&(t.x=0),(null==t.y||t.y<0)&&(t.y=0),t},o=function(n){var e=l(n),i=e.x,o=e.y,r={width:window.innerWidth,height:window.innerHeight},u={width:t().offsetWidth,height:t().offsetHeight};return i>r.width&&(i=r.width),o>r.height&&(o=r.height),i+u.width>r.width&&(i-=i+u.width-r.width),o+u.height>r.height&&(o-=o+u.height-r.height),u.height>r.height&&(o=0,t().classList.add("basicContext--scrollable")),{x:i,y:o}},r=function(n){return null==n.fn?!1:n.visible===!1?!1:n.disabled===!0?!1:(t("td[data-num='"+n.num+"']").onclick=n.fn,!0)},u=function(e,l,u,s){var d=i(e);document.body.insertAdjacentHTML("beforeend",d),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var c=o(l);t().style.left=""+c.x+"px",t().style.top=""+c.y+"px",t().style.opacity=1,null==u&&(u=a),t().parentElement.onclick=u;for(var f=0;f<e.length;++f)r(e[f]);return null!=s&&s(),"function"==typeof l.preventDefault&&l.preventDefault(),!0},s=function(){var n=t();return null==n||0===n.length?!1:!0},a=function(){return t().parentElement.remove(),null!=n&&(document.body.style.overflow=n,n=null),!0};return{show:u,visible:s,close:a}});