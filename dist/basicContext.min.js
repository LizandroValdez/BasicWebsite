"use strict";!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):window[n]=t()}("basicContext",function(){var n=null,t=function(){var n=void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+n)},e=function(){var n=void 0===arguments[0]?{}:arguments[0];return null==n["class"]&&(n["class"]=""),null==n.type&&(n.type="item"),null==n.icon&&(n.icon=null),null==n.title&&(n.title="Undefined"),null==n.fn&&"separator"!==n.type?(console.warn("Missing fn for item '"+n.title+"'"),!1):!0},l=function(n){var t,l=0,i="";t=function(n){var t="",i="";return e(n)===!1?"":(n.num=l++,null!==n.icon&&(i="<span class='"+n.icon+"'></span>"),"item"===n.type?t="\n			       <tr class='"+n["class"]+"'>\n			           <td data-num='"+n.num+"'>"+i+n.title+"</td>\n			       </tr>\n			       ":"separator"===n.type&&(t="\n			       <tr class='separator'></tr>\n			       "),t)},i+="\n	           <div class='basicContextContainer'>\n	               <div class='basicContext'>\n	                   <table>\n	                       <tbody>\n	           ";for(var o=0;o<n.length;++o)i+=t(n[o]);return i+="\n	                       </tbody>\n	                   </table>\n	               </div>\n	           </div>\n	           "},i=function(){var n=void 0===arguments[0]?{}:arguments[0],t={x:n.clientX,y:n.clientY};if("touchend"===n.type&&(null==t.x||null==t.y)){var e=n.changedTouches;null!=e&&e.length>0&&(t.x=e[0].clientX,t.y=e[0].clientY)}return(null==t.x||t.x<0)&&(t.x=0),(null==t.y||t.y<0)&&(t.y=0),t},o=function(n){var e=i(n),l=e.x,o=e.y,r={width:window.innerWidth,height:window.innerHeight},u={width:t().offsetWidth,height:t().offsetHeight};return l>r.width&&(l=r.width),o>r.height&&(o=r.height),l+u.width>r.width&&(l-=l+u.width-r.width),o+u.height>r.height&&(o-=o+u.height-r.height),u.height>r.height&&(o=0,t().classList.add("basicContext--scrollable")),{x:l,y:o}},r=function(n){null!=n.fn&&(t("td[data-num='"+n.num+"']").onclick=n.fn)},u=function(e,i,u,a){var c=l(e);document.body.insertAdjacentHTML("beforeend",c),null==n&&(n=document.body.style.overflow,document.body.style.overflow="hidden");var d=o(i);t().style.left=""+d.x+"px",t().style.top=""+d.y+"px",t().style.opacity=1,null==u&&(u=s),t().parentElement.onclick=u;for(var f=0;f<e.length;++f)r(e[f]);return null!=a&&a(),"function"==typeof i.preventDefault&&i.preventDefault(),!0},a=function(){var n=t();return null==n||0===n.length?!1:!0},s=function(){return t().parentElement.remove(),null!=n&&(document.body.style.overflow=n,n=null),!0};return{show:u,visible:a,close:s}});