"use strict";!function(t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):window[t]=n()}("basicContext",function(){var t=null,n=function(){var t=void 0===arguments[0]?"":arguments[0];return document.querySelector(".basicContext "+t)},e=function(){var t=void 0===arguments[0]?{}:arguments[0];return null==t["class"]&&(t["class"]=""),null==t.type&&(t.type="item"),t.visible!==!1&&(t.visible=!0),null==t.icon&&(t.icon=null),null==t.title&&(t.title="Undefined"),t.disabled!==!0&&(t.disabled=!1),t.disabled===!0&&(t["class"]+=" basicContext__item--disabled"),null==t.fn&&"separator"!==t.type&&t.disabled===!1?(console.warn("Missing fn for item '"+t.title+"'"),!1):!0},i=function(t){var n=0,i="",l=void 0;l=function(t){var i="",l="";return e(t)===!1?"":t.visible===!1?"":(t.num=n++,null!==t.icon&&(l="<span class='basicContext__icon "+t.icon+"'></span>"),"item"===t.type?i="\n			       <tr class='basicContext__item "+t["class"]+"'>\n			           <td class='basicContext__data' data-num='"+t.num+"'>"+l+t.title+"</td>\n			       </tr>\n			       ":"separator"===t.type&&(i="\n			       <tr class='basicContext__item basicContext__item--separator'></tr>\n			       "),i)},i+="\n	           <div class='basicContextContainer'>\n	               <div class='basicContext'>\n	                   <table>\n	                       <tbody>\n	           ";for(var o=0;o<t.length;++o)i+=l(t[o]);return i+="\n	                       </tbody>\n	                   </table>\n	               </div>\n	           </div>\n	           "},l=function(){var t=void 0===arguments[0]?{}:arguments[0],n={x:t.clientX,y:t.clientY};if("touchend"===t.type&&(null==n.x||null==n.y)){var e=t.changedTouches;null!=e&&e.length>0&&(n.x=e[0].clientX,n.y=e[0].clientY)}return(null==n.x||n.x<0)&&(n.x=0),(null==n.y||n.y<0)&&(n.y=0),n},o=function(t){var e=l(t),i=e.x,o=e.y,a={width:window.innerWidth,height:window.innerHeight},r={width:n().offsetWidth,height:n().offsetHeight};return i>a.width&&(i=a.width),o>a.height&&(o=a.height),i+r.width>a.width&&(i-=i+r.width-a.width),o+r.height>a.height&&(o-=o+r.height-a.height),r.height>a.height&&(o=0,n().classList.add("basicContext--scrollable")),{x:i,y:o}},a=function(t){return null==t.fn?!1:t.visible===!1?!1:t.disabled===!0?!1:(n("td[data-num='"+t.num+"']").onclick=t.fn,n("td[data-num='"+t.num+"']").oncontextmenu=t.fn,!0)},r=function(e,l,r,s){var d=i(e);document.body.insertAdjacentHTML("beforeend",d),null==t&&(t=document.body.style.overflow,document.body.style.overflow="hidden");var c=o(l),f=n();f.style.left=""+c.x+"px",f.style.top=""+c.y+"px",f.style.opacity=1,null==r&&(r=function(){return u(),!1}),f.parentElement.onclick=r,f.parentElement.oncontextmenu=r;for(var h=0;h<e.length;++h)a(e[h]);return null!=s&&s(),"function"==typeof l.preventDefault&&l.preventDefault(),"function"==typeof l.stopPropagation&&l.stopPropagation(),!0},s=function(){var t=n();return null==t||0===t.length?!1:!0},u=function(){return s()===!1?!1:(n().parentElement.remove(),null!=t&&(document.body.style.overflow=t,t=null),!0)};return{show:r,visible:s,close:u}});